# Model Context Protocol (MCP) Server + Auth0

This is a [Model Context Protocol (MCP)](https://modelcontextprotocol.io/introduction) server that supports remote MCP connections, with Auth0 built-in.

The MCP server (powered by [Cloudflare Workers](https://developers.cloudflare.com/workers/)):

- Acts as OAuth _Server_ to your MCP clients
- Acts as OIDC _Client_ to your Auth0 Tenant

## Getting Started

This demo allows an MCP Server to call a protected API on behalf of the authenticated user. To get started you will need the following:

1. Deploy the [Todos API](./todos-api/README.md)
2. Run the [MCP Server](./mcp-auth0-oidc/README.md)

## Access the remote MCP server from the Cloudflare Workers AI LLM Playground

Navigate to [https://playground.ai.cloudflare.com/](https://playground.ai.cloudflare.com/) and connect to your MCP server on the bottom left using the following URL pattern:

```bash
https://mcp-auth0-oidc.<your-subdomain>.workers.dev/sse
```

This will open a popup where you can sign in after which you'll be able to use all of the tools.

<img src="./docs/playground.png" width="750" alt="Workers AI LLM Playground">

## Access the remote MCP server from Claude Desktop

Open Claude Desktop and navigate to Settings -> Developer -> Edit Config. This opens the configuration file that controls which MCP servers Claude can access.

Replace the content with the following configuration:

```
{
  "mcpServers": {
    "math": {
      "command": "npx",
      "args": [
        "mcp-remote",
        "https://mcp-auth0-oidc.<your-subdomain>.workers.dev/sse"
      ]
    }
  }
}
```

This configuration uses `npx` to run [the `mcp-remote` package](https://www.npmjs.com/package/mcp-remote) to access your Remote MCP Server by passing the URL in the `args`.  

Once you restart Claude Desktop, a browser window will open showing your OAuth login page. Complete the authentication flow to grant Claude access to your MCP server. After you grant access, the tools will become available for you to use.


Once the Tools (under ðŸ”¨) show up in the interface, you can ask Claude to use them. For example: "Could you list my todos". Claude should invoke the tool and show the result generated by the MCP server.

<img src="./docs/claude.png" width="750" alt="Claude Desktop">
